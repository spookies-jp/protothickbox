/*
 * Thickbox 3.1 - One Box To Rule Them All.
 * By Cody Lindley (http://www.codylindley.com)
 * Copyright (c) 2007 cody lindley
 * Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
 * 
 * Protothickbox 3.1.4
 * Modified By Spookies Labs(http://labs.spookies.jp)
 * depends on prototype.js 1.6 or later + effects.js
*/
var tb_pathToImage="../images/loadingAnimation.gif";var ProtoThickBox={Version:"3.1.4"};document.observe("dom:loaded",function(){tb_init("a.thickbox");tb_init("area.thickbox");tb_init("input.thickbox");imgLoader=new Image();imgLoader.src=tb_pathToImage});function tb_init(a){$$(a).each(function(b){b.observe("click",function(h){var d=b.title||b.name||null;var c=b.href||b.alt;var f=b.rel||false;tb_show(d,c,f);b.blur();Event.stop(h);return false})})}function tb_show(j,b,h){try{if(typeof document.body.style.maxHeight==="undefined"){$(document.body).setStyle({height:"100%",width:"100%"});if(!$("TB_HideSelect")){$(document.body).insert("<iframe id='TB_HideSelect'></iframe><div id='TB_overlay'></div><div id='TB_window'></div>");$("TB_overlay").observe("click",tb_remove)}}else{if(!$("TB_overlay")){$(document.body).insert("<div id='TB_overlay'></div><div id='TB_window'></div>");$("TB_overlay").observe("click",tb_remove)}}if(tb_detectMacXFF()){$("TB_overlay").addClassName("TB_overlayMacFFBGHack")}else{$("TB_overlay").addClassName("TB_overlayBG")}if(j===null){j=""}$(document.body).insert("<div id='TB_load'><img src='"+imgLoader.src+"' /></div>");$("TB_load").show();$("TB_load").style.display="block";var c;if(b.indexOf("?")!=-1){c=b.substr(0,b.indexOf("?"))}else{c=b}var f=/\.jpg$|\.jpeg$|\.png$|\.gif$|\.bmp$/;var k=c.toLowerCase().match(f);if(k==".jpg"||k==".jpeg"||k==".png"||k==".gif"||k==".bmp"){TB_PrevCaption="";TB_PrevURL="";TB_PrevHTML="";TB_NextCaption="";TB_NextURL="";TB_NextHTML="";TB_imageCount="";TB_FoundURL=false;if(h){TB_TempArray=$$("a[rel="+h+"]");for(TB_Counter=0;((TB_Counter<TB_TempArray.length)&&(TB_NextHTML===""));TB_Counter++){var g=TB_TempArray[TB_Counter].href.toLowerCase().match(f);if(!(TB_TempArray[TB_Counter].href==b)){if(TB_FoundURL){TB_NextCaption=TB_TempArray[TB_Counter].title;TB_NextURL=TB_TempArray[TB_Counter].href;TB_NextHTML="<span id='TB_next'>&nbsp;&nbsp;<a href='#'>Next &gt;</a></span>"}else{TB_PrevCaption=TB_TempArray[TB_Counter].title;TB_PrevURL=TB_TempArray[TB_Counter].href;TB_PrevHTML="<span id='TB_prev'>&nbsp;&nbsp;<a href='#'>&lt; Prev</a></span>"}}else{TB_FoundURL=true;TB_imageCount="Image "+(TB_Counter+1)+" of "+(TB_TempArray.length)}}}imgPreloader=new Image();imgPreloader.onload=function(){imgPreloader.onload=null;var n=tb_getPageSize();var l=n[0]-150;var q=n[1]-150;var m=imgPreloader.width;var e=imgPreloader.height;if(m>l){e=e*(l/m);m=l;if(e>q){m=m*(q/e);e=q}}else{if(e>q){m=m*(q/e);e=q;if(m>l){e=e*(l/m);m=l}}}TB_WIDTH=m+30;TB_HEIGHT=e+60;$("TB_window").insert("<a href='#' id='TB_ImageOff' title='Close' onclick='return false;'><img id='TB_Image' src='"+b+"' width='"+m+"' height='"+e+"' alt='"+j+"'/></a><div id='TB_caption'>"+j+"<div id='TB_secondLine'>"+TB_imageCount+TB_PrevHTML+TB_NextHTML+"</div></div><div id='TB_closeWindow'><a href='#' id='TB_closeWindowButton' title='Close' onclick='return false;'>close</a> or Esc Key</div>");$("TB_closeWindowButton").observe("click",tb_remove);if(!(TB_PrevHTML==="")){function p(){$(document).stopObserving("click",p);$("TB_window").remove();$(document.body).insert("<div id='TB_window'></div>");tb_show(TB_PrevCaption,TB_PrevURL,h);return false}$("TB_prev").observe("click",p)}if(!(TB_NextHTML==="")){function o(){$("TB_window").remove();$(document.body).insert("<div id='TB_window'></div>");tb_show(TB_NextCaption,TB_NextURL,h);return false}$("TB_next").observe("click",o)}document.onkeydown=function(r){if(r==null){keycode=event.keyCode}else{keycode=r.which}if(keycode==27){tb_remove()}else{if(keycode==190){if(!(TB_NextHTML=="")){document.onkeydown="";o()}}else{if(keycode==188){if(!(TB_PrevHTML=="")){document.onkeydown="";p()}}}}};tb_position();$("TB_load").remove();$("TB_ImageOff").observe("click",tb_remove);$("TB_window").setStyle({display:"block"})};imgPreloader.src=b}else{var a=b.replace(/^[^\?]+\??/,"");var d=tb_parseQuery(a);TB_WIDTH=(d.width*1)+30||630;TB_HEIGHT=(d.height*1)+40||440;ajaxContentW=TB_WIDTH-30;ajaxContentH=TB_HEIGHT-45;if(b.indexOf("TB_iframe")!=-1){urlNoQuery=b.split("TB_");if($("TB_iframeContent")){$("TB_iframeContent").remove()}if(d.modal!="true"){$("TB_window").insert("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+j+"</div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton' title='Close' onclick='return false;'>close</a> or Esc Key</div></div><iframe frameborder='0' hspace='0' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1000)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px;height:"+(ajaxContentH+17)+"px;' > </iframe>")}else{$("TB_overlay").stopObserving();$("TB_window").insert("<iframe frameborder='0' hspace='0' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(Math.random()*1000)+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px;height:"+(ajaxContentH+17)+"px;'> </iframe>")}}else{if($("TB_window").getStyle("display")!="block"){if(d.modal!="true"){$("TB_window").insert("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+j+"</div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton' onclick='return false;'>close</a> or Esc Key</div></div><div id='TB_ajaxContent' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px'></div>")}else{$("TB_overlay").stopObserving();$("TB_window").insert("<div id='TB_ajaxContent' class='TB_modal' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px;'></div>")}}else{$("TB_ajaxContent").style.width=ajaxContentW+"px";$("TB_ajaxContent").style.height=ajaxContentH+"px";$("TB_ajaxContent").scrollTop=0;$("TB_ajaxWindowTitle").update(j)}}if($("TB_closeWindowButton")){$("TB_closeWindowButton").observe("click",tb_remove)}if(b.indexOf("TB_inline")!=-1){$("TB_ajaxContent").insert($("#"+d.inlineId).children());$("TB_window").observe("unload",function(){$("#"+d.inlineId).insert($("TB_ajaxContent").children())});tb_position();$("TB_load").remove();$("TB_window").setStyle({display:"block"})}else{if(b.indexOf("TB_iframe")!=-1){tb_position();if(Prototype.Browser.WebKit){$("TB_load").remove();$("TB_window").setStyle({display:"block"})}}else{new Ajax.Updater("TB_ajaxContent",b,{parameters:{random:new Date().getTime()},onComplete:function(){tb_position();$("TB_load").remove();tb_init("#TB_ajaxContent a.thickbox");$("TB_window").setStyle({display:"block"})}})}}}if(!d||!d.modal){document.onkeyup=function(l){if(l==null){keycode=event.keyCode}else{keycode=l.which}if(keycode==27){tb_remove()}}}}catch(i){alert($H(i).inspect());throw i}}function tb_showIframe(){if($("TB_load")){$("TB_load").remove()}$("TB_window").setStyle({display:"block"})}function tb_remove(){if($("TB_closeWindowButton")){$("TB_closeWindowButton").stopObserving("click")}new Effect.Fade("TB_window",{duration:0.5});["TB_window","TB_overlay","TB_HideSelect"].each(function(a){if($(a)){$(a).stopObserving().remove()}});if($("TB_load")){$("TB_load").remove()}if(typeof document.body.style.maxHeight=="undefined"){$(document.body).setStyle({height:"auto",width:"auto"})}document.onkeydown="";document.onkeyup="";return false}function tb_position(){$("TB_window").setStyle({marginLeft:"-"+parseInt((TB_WIDTH/2),10)+"px",width:TB_WIDTH+"px"});var a=(navigator.userAgent.toLowerCase().match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1];if(!(Prototype.Browser.IE&&!window.XMLHttpRequest)){if($("TB_window")){$("TB_window").setStyle({marginTop:"-"+parseInt((TB_HEIGHT/2),10)+"px"})}}}function tb_parseQuery(d){var e={};if(!d){return e}var a=d.split(/[;&]/);for(var c=0;c<a.length;c++){var g=a[c].split("=");if(!g||g.length!=2){continue}var b=unescape(g[0]);var f=unescape(g[1]);f=f.replace(/\+/g," ");e[b]=f}return e}function tb_getPageSize(){var c=document.documentElement;var a=window.innerWidth||self.innerWidth||(c&&c.clientWidth)||document.body.clientWidth;var b=window.innerHeight||self.innerHeight||(c&&c.clientHeight)||document.body.clientHeight;arrayPageSize=[a,b];return arrayPageSize}function tb_detectMacXFF(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("mac")!=-1&&a.indexOf("firefox")!=-1){return true}};